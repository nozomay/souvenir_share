<!--マイページ-->
<div class="container">
  <div class="row">
    <% if flash[:notice] %>
      <div class="flash">
        <%= flash[:notice] %>
      </div>
    <% end %>
  </div>
</div>
<div class="container">
  <div class="row m-5">
    <!--プロフィール画像-->
    <div class="col-sm-3">
      <%= attachment_image_tag @user, :profile_image, :fill, 20, 20, format: 'jpeg', fallback: "no_image.jpg", class:"mt-3 rounded-circle"; %>
    </div>
    <!--ニックネーム-->
    <div class="col-sm-9">
      <div class="row p-1">
        <div class="col-8 col-sm-6">
          <%= @user.name %>
        </div>
        <div class="col-4 col-sm-6">
          <% if @user.id == current_user.id %>
            <%= link_to "プロフィール編集", edit_user_path(@user) %>
            <%= link_to "投稿する", new_post_path %>
          <% else %>
            <% if current_user.following?(@user) %>
              <%= link_to "フォロー中", user_relationships_path(@user.id), method: :delete %>
            <% else %>
              <%= link_to "フォローする", user_relationships_path(@user.id), method: :POST %>
            <% end %>
           <% end %>
        </div>
      </div>
      <div class="row">
        <div class="col-4 col-sm-6">
          <!--自己紹介文-->
          <div class="p-1">
          <%= @user.introduction %>
          </div>
          
          <div class="p-1">
          投稿数：<%= @user.posts.count %>
          </div>
          <br class="d-inline d-sm-none">
          <div class="p-1">
          フォロー数：<%= link_to user_followings_path(@user) do %>
                        <%= @user.followings.count %>
                      <% end %>
          <br class="d-inline d-sm-none">
          フォロワー数：<%= link_to user_followers_path(@user) do %>
                          <%= @user.followers.count %>
                        <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row border m-3">
    <div class="col-4 col-sm-6 p-5">
    <% @posts.each do |post| %>
      <%= link_to post_path(post.id) do %>
        <%= attachment_image_tag post, :image, :fill, 300, 300 %>
      <% end %>
    <% end %>
    <%= paginate @posts %>
    </div>
  </div>
</div>